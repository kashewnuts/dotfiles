# PR レビュー（日本語）

GitHub Pull Request をレビューし、日本語で構造化された要約を出力する。

## 入力

`$ARGUMENTS` には以下のいずれかを指定:
- PR URL (例: `https://github.com/owner/repo/pull/123`)
- PR 番号 (例: `123` - カレントリポジトリの PR)

## 処理手順

1. **PR 情報の取得**
   - `gh pr view $ARGUMENTS --json number,title,body,author,state,additions,deletions,changedFiles,labels,reviewDecision`
   - PR のメタ情報を取得

2. **変更内容の取得**
   - `gh pr diff $ARGUMENTS`
   - 変更されたファイルと差分を取得

3. **変更の分析**
   - 変更の目的を推測
   - 影響範囲を特定（どのモジュール/機能に影響するか）
   - 変更の種類を分類（機能追加/バグ修正/リファクタリング/ドキュメント等）

4. **レビューポイントの特定**
   - セキュリティ上の懸念
   - パフォーマンスへの影響
   - テストカバレッジ
   - コードスタイルの一貫性

5. **リスク評価**
   - 低: 小規模な変更、影響範囲が限定的
   - 中: 複数ファイルの変更、既存機能への影響あり
   - 高: 大規模な変更、破壊的変更の可能性

## 出力フォーマット

```markdown
## PR #XXX: [タイトル]

**作成者**: @username | **状態**: Open/Merged/Closed
**変更**: +X行 / -Y行 / Zファイル

---

### 概要

- **目的**: この PR が解決しようとしている問題や追加する機能
- **変更種別**: 機能追加 / バグ修正 / リファクタリング / ドキュメント
- **影響範囲**: 影響を受けるモジュールや機能

---

### 変更内容

| ファイル | 変更内容 |
|----------|----------|
| `path/to/file1.py` | 変更の説明 |
| `path/to/file2.py` | 変更の説明 |

---

### レビューポイント

- [ ] セキュリティ: 確認すべき点
- [ ] パフォーマンス: 確認すべき点
- [ ] テスト: 確認すべき点
- [ ] その他: 確認すべき点

---

### リスク評価

**リスクレベル**: 低 / 中 / 高

**理由**:
- リスク要因1
- リスク要因2

---

### 推奨アクション

1. アクション1
2. アクション2
```

## 注意事項

- PR の説明文 (body) がある場合は、それを参考に目的を把握する
- コミットメッセージも参考にする
- 大規模な PR の場合は、主要な変更に焦点を当てる
- レビュー済みの場合は、既存のレビューコメントも考慮する
